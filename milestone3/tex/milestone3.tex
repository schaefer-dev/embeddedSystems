% exercise sheet with header on every page for math or close subjects
\documentclass[12pt]{article}
\usepackage[utf8]{inputenc}
\usepackage{latexsym}
\usepackage{multicol}
\usepackage{fancyhdr}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{enumerate}
\usepackage{listings}
\usepackage{graphicx}

% Shortcuts for bb, frak and cal letters
\newcommand{\E}{\mathbb{E}}
\newcommand{\V}{\mathbb{V}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Pfrak}{\mathfrak{P}}
\newcommand{\Pfrac}{\mathfrak{P}}
\newcommand{\Bfrac}{\mathfrak{P}}
\newcommand{\Bfrak}{\mathfrak{B}}
\newcommand{\Fcal}{\mathcal{F}}
\newcommand{\Ycal}{\mathcal{Y}}
\newcommand{\Bcal}{\mathcal{B}}
\newcommand{\Acal}{\mathcal{A}}

% formating
\topmargin -3.5cm
\textheight 22cm
\textwidth 16.0 cm
\oddsidemargin -0.1cm

% Fancy Header on every Page
\pagestyle{fancy}
\lhead{\textbf{Embedded Systems Milestone 3}\\Hardware Number 1}
\rhead{Daniel Sch√§fer (2549458)\\ Rafael Dewes (2548365)\\ Kevin M\"uller (2550062)}
\renewcommand{\headrulewidth}{1.2pt}
\setlength{\headheight}{110pt}

\begin{document}
\pagenumbering{gobble}
\lstset{language=C++}

\section*{Draft: Notes which Tasks exist for both robots}

\subsection*{NOTES: List of Tasks Scout}
\begin{itemize}
  \item Receive photosensor readings (periodic), might queue the task to handle high readings
  \item Handle high photosensor readings (high priority), puts collector communication into task queue
  \item communicate harvesting position to collector (high priority)
  \item Correct Theta (by changing the current velocities of the two motors) to point towards current destination (preemptive, lowest priority, if condition for turning not true - just continue to drive straight). This tasks queries the "generate new destination" task upon reaching the current destination
  \item Generate new Goal (medium priority), generate new destination where to drive - mainly tactic finetuning (initially will generate random value)
  \item Send collector the currently estimated scout position (low priority, periodic)
  \item Receive Referee updates and update estimation (medium priority, triggered by interrupt)
\end{itemize}

\subsection*{Collector Tasks}
\begin{enumerate}
  \item Receive proximity sensor readings, might queue the task to handle high readings (periodic)
  	\begin{itemize}
  	\item \textbf{Main properties:} Periodic, non-preemtive and not entirely known before-hand
  	\item \textbf{Release time:} Same as the period (immediately available)
  	\item \textbf{Period:} Since this task can be handled very fast, the period can also be very fast. We will start with a period of 10ms and later fine-tune it using the hardware.
  	\item \textbf{Relative deadline:} Does not need a deadline
  	\item \textbf{Approximate cost:} The following operations need to be executed where the last one needs to be done only when the readings are higher than the threshold, which should happen rather rarely: Read each the sensor (3) and for each one compare the value to the threshold (3), enqueue task (i.e. make call to the scheduler) to handle high readings (2). We argue that the first eight tasks (read and compare) can be executed almost immediately and the last one also very fast. Therefore we assign this task a (relative) cost of 3+3+2=8.
  	\item \textbf{Urgency:} The worst thing that happens when the task is delayed for too long it that he robot might not see another robot nearby. This does not do any damage. However, it might also collide with its team mate which would do significant damage so this task has a (relative) urgency of 5.
  	\item \textbf{Dependencies:} No dependencies on other tasks.
  	\end{itemize}
  \item Handle high proximity readings (high priority), includes calculation if its own scout.
  	\begin{itemize}
  	\item \textbf{Main properties:} Aperiodic, non-preemtive, not entirely known before-hand
  	\item \textbf{Release time:} Becomes available as soon as enqueued by other task. (= 0 or not applicable?)
  	\item \textbf{Relative deadline:} Depending on the threshold, this task should get a deadline that ensures that the collector will never push its team mate. Since we have not fixed the threshold proximity and maximum driving speed, the exact deadline can only be calculated later when working with the real hardware.
  	\item \textbf{Approximate cost:} The following operations need to be executed: Retrieve last scout position (1), retrieve time and calculate elapsed time since last scout position update (3), calculate the distance that he scout has traveled since (i.e. the radius where scout might be) (2), compare current proximity value with possible scout position (3) and make decision whether to hit or not and depending on the result set the current destination value (1). Therefore we assign this task a (relative) cost of 1+3+2+3+1=10. 
  	\item \textbf{Urgency:} This task has about he same reasoning for urgency as Task 1, so it also gets an urgency of 5.
  	\item \textbf{Dependencies:} This task can only be executed after Task 1. This is ensured because this task is scheduled at the end of Task 1 when all rw operations to the shared global memory are done and the task is finished.
   	\end{itemize} 	
  \item Correct Theta (by changing the current velocities of the two motors) to point towards current destination (preemptive, lowest priority, if condition for turning not true - just continue to drive straight). This tasks queries the "generate new destination" task upon reaching the current destination
  \begin{itemize}
  	\item \textbf{Main properties:}
  	\item \textbf{Release time:}
  	\item \textbf{Relative deadline:}
  	\item \textbf{Approximate cost:}
  	\item \textbf{Urgency:}
  	\item \textbf{Dependencies:}
   	\end{itemize} 	
  \item Generate new Goal (medium priority), generate new destination where to drive - mainly tactic finetuning (initially will generate random value)
  \begin{itemize}
  	\item \textbf{Main properties:}
  	\item \textbf{Release time:}
  	\item \textbf{Relative deadline:}
  	\item \textbf{Approximate cost:}
  	\item \textbf{Urgency:}
  	\item \textbf{Dependencies:}
   	\end{itemize}
  \item Receive Referee updates and update estimation (medium priority, triggered by interrupt)
  \item Handle received harvesting position (highest priority, triggered by interrupt). Overwrites current destination regardless of roboter state
\end{enumerate}


\end{document}
